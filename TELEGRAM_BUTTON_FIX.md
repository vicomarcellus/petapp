# ‚úÖ –ö–Ω–æ–ø–∫–∞ Telegram –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞!

## üêõ –ü—Ä–æ–±–ª–µ–º–∞

–ö–Ω–æ–ø–∫–∞ "Log in via Telegram" –Ω–µ –ø–æ—è–≤–ª—è–ª–∞—Å—å –Ω–∞ —ç–∫—Ä–∞–Ω–µ –≤—Ö–æ–¥–∞.

## üîç –ü—Ä–∏—á–∏–Ω–∞

–í React –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `<script>` —Ç–µ–≥–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ JSX. –û–Ω–∏ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è.

### –ë—ã–ª–æ (–Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ):
```tsx
<div className="flex justify-center pt-4">
  <script
    async
    src="https://telegram.org/js/telegram-widget.js?22"
    data-telegram-login="kentpetapp_bot"
    data-size="large"
    data-onauth="onTelegramAuth(user)"
    data-request-access="write"
  />
</div>
```

## üîß –†–µ—à–µ–Ω–∏–µ

–ó–∞–≥—Ä—É–∂–∞–µ–º —Å–∫—Ä–∏–ø—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `useEffect`:

### –°—Ç–∞–ª–æ (—Ä–∞–±–æ—Ç–∞–µ—Ç):
```tsx
useEffect(() => {
  // Callback –¥–ª—è Telegram
  window.onTelegramAuth = async (telegramUser: any) => {
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Ö–æ–¥–∞
  };

  // –°–æ–∑–¥–∞–µ–º –∏ –∑–∞–≥—Ä—É–∂–∞–µ–º —Å–∫—Ä–∏–ø—Ç
  const script = document.createElement('script');
  script.src = 'https://telegram.org/js/telegram-widget.js?22';
  script.async = true;
  script.setAttribute('data-telegram-login', 'kentpetapp_bot');
  script.setAttribute('data-size', 'large');
  script.setAttribute('data-onauth', 'onTelegramAuth(user)');
  script.setAttribute('data-request-access', 'write');
  
  const container = document.getElementById('telegram-login-container');
  if (container) {
    container.appendChild(script);
  }

  return () => {
    delete window.onTelegramAuth;
    if (container && script.parentNode === container) {
      container.removeChild(script);
    }
  };
}, [setCurrentUser]);
```

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

1. –£–¥–∞–ª–µ–Ω `<script>` —Ç–µ–≥ –∏–∑ JSX
2. –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å id: `telegram-login-container`
3. –°–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤ useEffect
4. –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞

## üöÄ –î–µ–ø–ª–æ–π

–ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã –∏ –∑–∞–ø—É—à–µ–Ω—ã:
```
fix: Load Telegram Login Widget dynamically
Commit: 8a151ce
```

Vercel –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç —á–µ—Ä–µ–∑ 1-2 –º–∏–Ω—É—Ç—ã.

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –õ–æ–∫–∞–ª—å–Ω–æ (—Å–µ–π—á–∞—Å):
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5174/
2. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ "Log in via Telegram"
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –Ω–µ—ë
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤—Ö–æ–¥ –≤ Telegram

### –ù–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ (—á–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã):
1. –û—Ç–∫—Ä–æ–π—Ç–µ https://petapp-kent.vercel.app
2. –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ –≤—Ö–æ–¥–∞
3. –í–æ–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ Telegram
4. –ì–æ—Ç–æ–≤–æ! üéâ

## üìù –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è** ‚Üí useEffect –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
2. **–°–æ–∑–¥–∞–µ—Ç—Å—è callback** ‚Üí window.onTelegramAuth
3. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —Å–∫—Ä–∏–ø—Ç** ‚Üí Telegram Widget
4. **–°–∫—Ä–∏–ø—Ç —Ä–µ–Ω–¥–µ—Ä–∏—Ç –∫–Ω–æ–ø–∫—É** ‚Üí –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
5. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç** ‚Üí Telegram –ø—Ä–æ–≤–µ—Ä—è–µ—Ç
6. **Callback –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è** ‚Üí –°–æ—Ö—Ä–∞–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

### –ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–ª `<script>` –≤ JSX?

React –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Å–∫—Ä–∏–ø—Ç—ã, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ JSX, –ø–æ —Å–æ–æ–±—Ä–∞–∂–µ–Ω–∏—è–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏. –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DOM API –Ω–∞–ø—Ä—è–º—É—é.

### –ü–æ—á–µ–º—É useEffect?

useEffect –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ—Å–ª–µ —Ä–µ–Ω–¥–µ—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, –∫–æ–≥–¥–∞ DOM —É–∂–µ –≥–æ—Ç–æ–≤. –≠—Ç–æ –∏–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤.

### Cleanup —Ñ—É–Ω–∫—Ü–∏—è

```tsx
return () => {
  delete window.onTelegramAuth;
  if (container && script.parentNode === container) {
    container.removeChild(script);
  }
};
```

–û—á–∏—â–∞–µ—Ç callback –∏ —É–¥–∞–ª—è–µ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏.

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

- ‚úÖ –ö–Ω–æ–ø–∫–∞ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- ‚úÖ –í—Ö–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞

## üìä –ü—Ä–æ–≤–µ—Ä–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–æ:
```bash
# Dev —Å–µ—Ä–≤–µ—Ä —É–∂–µ –∑–∞–ø—É—â–µ–Ω
# –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:5174/
```

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω:
```bash
# –ß–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã
# –û—Ç–∫—Ä–æ–π—Ç–µ https://petapp-kent.vercel.app
```

## üêõ –ï—Å–ª–∏ –≤—Å—ë –µ—â—ë –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ö–Ω–æ–ø–∫–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:** 
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è (–≤–∫–ª–∞–¥–∫–∞ Network)

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—à–∏–±–∫–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –¥–æ–º–µ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω –≤ @BotFather
2. –î–ª—è localhost: `/setdomain` ‚Üí `localhost`
3. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞: –¥–æ–º–µ–Ω —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Callback –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è
**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `window.onTelegramAuth` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –±–æ—Ç –∞–∫—Ç–∏–≤–µ–Ω

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [Telegram Login Widget](https://core.telegram.org/widgets/login)
- [React useEffect](https://react.dev/reference/react/useEffect)
- [DOM createElement](https://developer.mozilla.org/en-US/docs/Web/API/Document/createElement)

---

**–ö–Ω–æ–ø–∫–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á–µ—Ä–µ–∑ 2 –º–∏–Ω—É—Ç—ã –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ!** üöÄ

---

## üí° –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –±–æ—Ç–∞:
1. –ò–∑–º–µ–Ω–∏—Ç–µ `data-telegram-login` –≤ useEffect
2. –û–±–Ω–æ–≤–∏—Ç–µ –¥–æ–º–µ–Ω –≤ @BotFather
3. –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ –∏ –∑–∞–¥–µ–ø–ª–æ–π—Ç–µ

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä –∫–Ω–æ–ø–∫–∏:
- `data-size="small"` - –º–∞–ª–µ–Ω—å–∫–∞—è
- `data-size="medium"` - —Å—Ä–µ–¥–Ω—è—è
- `data-size="large"` - –±–æ–ª—å—à–∞—è (—Ç–µ–∫—É—â–∞—è)
