# –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
- –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `User` —Å –ø–æ–ª—è–º–∏ –∏–∑ Telegram
- –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏ —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç –ø–æ–ª–µ `userId`
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ –≤–µ—Ä—Å–∏–∏ 8 —Å —Ç–∞–±–ª–∏—Ü–µ–π `users`

### 2. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **Auth.tsx** - —ç–∫—Ä–∞–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Telegram Login Widget
- **authService** - —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- –û–±–Ω–æ–≤–ª–µ–Ω **Header** - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –∫–Ω–æ–ø–∫—É –≤—ã—Ö–æ–¥–∞
- –û–±–Ω–æ–≤–ª–µ–Ω **App** - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–∞

### 3. –õ–æ–≥–∏–∫–∞
- **usePetInit** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç –ø–∏—Ç–æ–º—Ü–∞ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **PetManager** - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–∏—Ç–æ–º—Ü–µ–≤ –ø–æ userId
- **EntryView** - —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å–∏ —Å userId
- **Header** - —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–∏—Ç–æ–º—Ü–µ–≤ –ø–æ userId

### 4. –•—Ä–∞–Ω–µ–Ω–∏–µ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
- –î–∞–Ω–Ω—ã–µ –≤ IndexedDB –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ userId
- –ü—Ä–∏ –≤—ã—Ö–æ–¥–µ localStorage –æ—á–∏—â–∞–µ—Ç—Å—è

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

1. **Calendar.tsx** - –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –ø–æ userId
2. **ActivityLog.tsx** - –¥–æ–±–∞–≤–∏—Ç—å userId –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∑–∞–ø–∏—Å–µ–π
3. **MedicationManager.tsx** - –¥–æ–±–∞–≤–∏—Ç—å userId
4. **Analytics.tsx** - —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ userId
5. **ChangeHistory.tsx** - —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ userId
6. **MedicationSchedules.tsx** - –¥–æ–±–∞–≤–∏—Ç—å userId

### –°–µ—Ä–≤–∏—Å—ã:

1. **backup.ts** - –æ–±–Ω–æ–≤–∏—Ç—å —ç–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç
2. **history.ts** - –¥–æ–±–∞–≤–∏—Ç—å userId
3. **medicationSchedule.ts** - –¥–æ–±–∞–≤–∏—Ç—å userId
4. **ai.ts** - –≤–æ–∑–º–æ–∂–Ω–æ, –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å
5. **aiAnalytics.ts** - —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–æ userId

## üìù –®–∞–±–ª–æ–Ω –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:

```typescript
// –ë—ã–ª–æ:
const entries = useLiveQuery(() => 
  db.dayEntries.where('petId').equals(currentPetId).toArray()
);

// –°—Ç–∞–ª–æ:
const { currentUser } = useStore();
const entries = useLiveQuery(() => 
  currentUser && currentPetId
    ? db.dayEntries
        .where('petId').equals(currentPetId)
        .filter(e => e.userId === currentUser.id)
        .toArray()
    : []
, [currentUser, currentPetId]);
```

### –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π:

```typescript
// –ë—ã–ª–æ:
await db.dayEntries.add({
  petId: currentPetId,
  date: selectedDate,
  // ...
});

// –°—Ç–∞–ª–æ:
if (!currentUser) return;
await db.dayEntries.add({
  userId: currentUser.id,
  petId: currentPetId,
  date: selectedDate,
  // ...
});
```

## üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

### 1. –°–æ–∑–¥–∞–π—Ç–µ Telegram –±–æ—Ç–∞

```
1. @BotFather ‚Üí /newbot
2. –ò–º—è: Pet Health Tracker
3. Username: pet_health_tracker_bot
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ç–æ–∫–µ–Ω
```

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–º–µ–Ω

```
1. @BotFather ‚Üí /setdomain
2. –í—ã–±–µ—Ä–∏—Ç–µ –±–æ—Ç–∞
3. –í–≤–µ–¥–∏—Ç–µ –¥–æ–º–µ–Ω: your-app.vercel.app
```

### 3. –û–±–Ω–æ–≤–∏—Ç–µ Auth.tsx

```tsx
data-telegram-login="pet_health_tracker_bot"
```

### 4. –î–µ–ø–ª–æ–π

```bash
npm run build
vercel --prod
```

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Telegram –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ HMAC-SHA256
- –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–∫–∞–ª—å–Ω–æ
- –¢–æ–∫–µ–Ω –±–æ—Ç–∞ –Ω–µ –Ω—É–∂–µ–Ω –≤ –∫–ª–∏–µ–Ω—Ç–µ
- –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–µ—Ä–≤–µ—Ä–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üìä –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ
2. –í—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ Telegram
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –¥–∞–Ω–Ω—ã–µ

–î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—Ç userId.

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –û–±–Ω–æ–≤–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Å–º. —Å–ø–∏—Å–æ–∫ –≤—ã—à–µ)
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏
3. –°–æ–∑–¥–∞—Ç—å Telegram –±–æ—Ç–∞
4. –ó–∞–¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ Vercel
5. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `QUICK_START_AUTH.md` - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `TELEGRAM_AUTH_SETUP.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- `AUTH_MIGRATION_TODO.md` - —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
